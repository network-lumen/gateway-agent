# Optional overrides for docker-compose.yml

# Public metadata (reported by /status)
REGION=eu-west
PUBLIC_ENDPOINT=http://localhost:8787

# Chain (node_api)
CHAIN_REST_BASE_URL=http://142.132.201.187:1317
# Wallet address HRP (defaults to operator.address prefix from config.json)
ADDR_HRP=lmn

# Timeouts (node_api -> Kubo)
KUBO_REQUEST_TIMEOUT_MS=15000
KUBO_IMPORT_TIMEOUT_MS=300000
# Optional: where to spool CAR uploads before background ingest
INGEST_TMP_DIR=/data/node_api/ingest_tmp

# SQLite timeouts
NODE_API_SQLITE_BUSY_TIMEOUT_MS=5000
INDEXER_SQLITE_BUSY_TIMEOUT_MS=5000

# Pin upstream images (avoid :latest)
KUBO_IMAGE=ipfs/kubo@sha256:8bc99f94ea109f27ac408354e92b74f4f6f804fe0b4576f424520a20475dc88e
PROMETHEUS_IMAGE=prom/prometheus@sha256:49214755b6153f90a597adcbff0252cc61069f8ab69ce8411285cd4a560e8038
GRAFANA_IMAGE=grafana/grafana@sha256:70d9599b186ce287be0d2c5ba9a78acb2e86c1a68c9c41449454d0fc3eeb84e8

# Bind internal/admin ports to localhost by default (set 0.0.0.0 to expose)
KUBO_API_BIND=127.0.0.1
KUBO_GATEWAY_BIND=127.0.0.1
INDEXER_BIND=127.0.0.1
GRAFANA_BIND=127.0.0.1

# Grafana
GRAFANA_ADMIN_PASSWORD=<YOUR-PASSWORD>

# Indexer ML models cache
TRANSFORMERS_CACHE_DIR=/data/transformers-cache
# Set to 1 to prevent any remote downloads (requires prefetch + persistent cache)
TRANSFORMERS_LOCAL_FILES_ONLY=0
TEXT_TAGGER_ENABLE=1
IMAGE_TAGGER_ENABLE=1
ML_WORKER_ENABLE=1
ML_WORKER_TASK_TIMEOUT_MS=120000
# Optional: pin exact model IDs / revision
# TEXT_TAGGER_MODEL=Xenova/distilbert-base-uncased-mnli
# IMAGE_TAGGER_MODEL=Xenova/clip-vit-base-patch32
# TRANSFORMERS_REVISION=main
